package main

import (
	"fmt"
	"log"
	"net"
)

// Server-Konfiguration
const (
	port       = 25566
	motd       = "§aMini-Server §7» §eNur Ping & Kick"
	kickReason = "§cDu wurdest gekickt!"
)

// Funktion zum Laden des Server-Icons (nur ein Platzhalter)
func loadServerIcon() string {
	// Hier kannst du das tatsächliche Server-Icon laden
	// Zum Beispiel: Dateisystem, DB, etc.
	return "data:image/png;base64,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"
}

// Hauptverbindungsbehandlung
func handleConnection(conn net.Conn, icon string) {
	defer conn.Close()

	// Hier sendest du ein MOTD und Icon
	fmt.Println("Neue Verbindung:", conn.RemoteAddr())

	// Sende Server-MOTD und Icon
	conn.Write([]byte(motd + "\n"))
	conn.Write([]byte(icon))

	// Kicke den Benutzer nach dem Joinen
	conn.Write([]byte(kickReason))
}

// Server-Startfunktion
func startServer() {
	// Server lauscht auf Port 25566
	listen, err := net.Listen("tcp", fmt.Sprintf(":%d", port))
	if err != nil {
		log.Fatalf("Fehler beim Starten des Servers: %v", err)
	}
	defer listen.Close()
	log.Printf("Server läuft auf Port %d...", port)

	// Verbindungsannahme und Handhabung
	for {
		conn, err := listen.Accept()
		if err != nil {
			log.Printf("Verbindungsfehler: %v", err)
			continue
		}

		// Lade Server-Icon
		icon := loadServerIcon()

		// Verarbeite die eingehende Verbindung
		go handleConnection(conn, icon)
	}
}

func main() {
	// Starte den Server
	startServer()
}
